{"generatedAt":1718310149003,"generateTime":3855,"contents":[{"_path":"/blog/client-side-inference","_dir":"blog","_draft":false,"_partial":false,"_locale":"","title":"Client Side Inference with TFJS","description":"How to convert models to JavaScript compatible format, save them on the clients' browsers and load them for inference.","project":"cgan","type":"article","image":"/client.jpg","url":"https://mahmoudyusof.github.io/cgan/client-side-inference/","date":"2021-02-24","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"client-side-inference-with-tfjs"},"children":[{"type":"text","value":"Client Side Inference with TFJS"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This article explains everything you need to know in order to start using deeplearning models in the browser."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nIn particular, we are going to talk about running inference in the browswer, since training models in the browser doesn't really make that much sense. God bless Google Colab <3"}]},{"type":"element","tag":"h2","props":{"id":"why"},"children":[{"type":"text","value":"Why?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Traditionally, we used to load a model in server (usually flask servers), send requests with the input features to that server, run inference and send the results in the response. That's fine, but if you have a big web app that handles a lot of different requests, then it makes perfect sense to outsource some of the computations to the front-end, which would improve the performance of your web app."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThe most time consuming task you might have in your webserver might be the inference task, if you outsource this task to the browser, your server is going to be blazing fast."}]},{"type":"element","tag":"h2","props":{"id":"how"},"children":[{"type":"text","value":"How?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Sold, now tell me how to do it."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nWe all know that the most used language on the browser is JavaScript. If you don't like it, then maybe this article is not for you."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nLet's see the steps that we need to go through to get what we want."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Install tensorflowjs-converter."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Convert a saved model to js compatible format."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Send the model in a response and save it in the browser."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Load the model from the browser and run inference."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The model I am going to use in here is a generator model, you can find how to create it and save it in "},{"type":"element","tag":"a","props":{"href":"https://github.com/mahmoudyusof/hands-on-ml/blob/master/17_Generative_Models/DCGANs.ipynb","rel":["nofollow"]},"children":[{"type":"text","value":"this notebook"}]}]},{"type":"element","tag":"h3","props":{"id":"installing-tensorflowjs-converter"},"children":[{"type":"text","value":"Installing tensorflowjs-converter"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This CLI tool comes by default when you install tensorflowjs via pip."}]},{"type":"element","tag":"pre","props":{"code":"$ pip install tensorflowjs\n","language":"shell","meta":"","className":"language-shell shiki shiki-themes dark-plus github-dark","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":" pip"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":" tensorflowjs\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"That's it, now you have the converter installed and you can use the CLI to convert your model to the required format for TFJS."}]},{"type":"element","tag":"h3","props":{"id":"converting-the-saved-model"},"children":[{"type":"text","value":"Converting the saved model"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Before we start with the conversion, you should take a look at the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"--help"}]},{"type":"text","value":" option in this command."}]},{"type":"element","tag":"pre","props":{"code":"$ tensorflowjs_converter --help\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"$ tensorflowjs_converter --help\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As you can see, there are multiple input formats available, since there are many ways by which you can save a model."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nIn my case I used keras to create the model and saved it in a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"SavedModel"}]},{"type":"text","value":" format which creates a directory with a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"saved_model.pb"}]},{"type":"text","value":" file in it."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now we want to convert this model."}]},{"type":"element","tag":"pre","props":{"code":"$ tensorflow_converter --input_format=tf_saved_model source/model/directory target/save/directory\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"$ tensorflow_converter --input_format=tf_saved_model source/model/directory target/save/directory\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In this command "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"source/model/directory"}]},{"type":"text","value":" should have a file with the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"pb"}]},{"type":"text","value":" extension. This will output a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"model.json"}]},{"type":"text","value":" file and some other binary fiels in the target directory."}]},{"type":"element","tag":"h3","props":{"id":"save-the-model-in-the-browser"},"children":[{"type":"text","value":"Save the model in the browser"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now for some JS stuff. First install tensorflowjs in your app. You can use npm or just include the CDN link in your code directly."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CDN "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"<script src=\"https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.0.0/dist/tf.min.js\"></script> "}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"npm installation "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"$ npm install --save @tensorflow/tfjs"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"yarn installation "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"$ yarn add @tensorflow/tfjs"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now let's create a funciton that responds to, for example, a click event. This function will do the following:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Try to load the model from localStorage\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"If it fails it will load the model from the server"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Then save the model in localStorage"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Run inference with the model"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Update UI to display results"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In the following code we will be using a GAN model to generate hand written digits. If you don't know how GANs work, basically we need a random vector and we'll pass it to the model and the model will return a 28 by 28 image. In this particular GAN we also give it a label specifying which digit we want to generate."}]}]},{"type":"element","tag":"pre","props":{"code":"// load the model from localstorage\ntf.fromGraphModel(\"localstorage://saved_model_name\")\n    .then(model => {\n        // success case, run the generate function.\n        generate(model);\n    }).catch(e => {\n        // if you fail, load the model from the server\n        tf.fromGraphModel(\"http://model-server-url/model_directory\")\n            .then(model => {\n            // In the chained \"then call\" save the model in localstorage\n            model.save(\"localstorage://saved_model_name\");\n            \n            // run inference\n            generate(model);\n        }).catch(e => {\n            console.log(\"some unexpected error\");\n            console.log(e);\n        });\n    });\n","language":"js","meta":"","className":"language-js shiki shiki-themes dark-plus github-dark","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"// load the model from localstorage\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"tf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"fromGraphModel"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"localstorage://saved_model_name\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    ."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"model"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"        // success case, run the generate function.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"        generate"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"model"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    })."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"        // if you fail, load the model from the server\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"        tf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"fromGraphModel"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"http://model-server-url/model_directory\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            ."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"model"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"            // In the chained \"then call\" save the model in localstorage\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            model"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"save"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"localstorage://saved_model_name\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"            // run inference\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"            generate"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"model"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"        })."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"some unexpected error\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"        });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    });\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now let's take a look at the generate method and see what it does. This is where most of the tfjs stuff takes place."}]},{"type":"element","tag":"pre","props":{"code":"// import the library under the tf namespace\nimport * as tf from \"@tensorflow/tfjs\";\n\nfunction generate(model){\n    // tf.tidy handles garbage collection to prevent any memory leakage\n    tf.tidy(() => {\n        // vector of shape [batch_size, encoding_dim]\n        const random_vector = tf.randomNormal([1, 100]);\n\n        // the label tensor, shape is [batch_size, 1]\n        // I am passing the data type as int32 because I want the funciton to return an int,\n        // however the model accepts float numbers not ints this is why I am casting the tensor.\n        const label = tf.randomUniform([1, 1], 0, 10, \"int32\").cast(\"float32\");\n\n        // generate new image\n        model.execute([random_vector, label]).then(image => {\n            // let's dispose of the model since we don't need it in memory any more\n            model.dispose();\n            // images are of shape [batch_size, 28, 28]\n            // batch_size here is 1 so we can remove it by squeezing the tensor\n            image = image.squeeze();\n\n            // the output of the model ranges from -1 to 1,\n            // let's make it from 0 to 1 since the next funciton is picky\n            image = tf.div(tf.add(image, tf.scalar(1)), tf.scalar(2))\n\n            // let's now make the image of rank 3 to make it an appropriate image\n            // of shape [28, 28, 1] which means a gray scale image\n            // The second argument of this function is the axis of expansion\n            image = tf.expandDims(image, 2);\n\n            // Let's now resize the image from [28, 28, 1] to [200, 200, 1].\n            image = tf.image.resizeNearestNeighbor(img, [200, 200]);\n\n            // Now let's get the canvas element, that we should create in markup, and write this image to it.\n            const canvas = document.getElementById(\"myCanvas\");\n            \n            tf.browser.toPixels(image, canvas)\n            .then(output => {\n                console.log(\"Success\");\n            }).catch(e => {\n                console.log(e);\n            })\n\n            /**\n             * Horrai!! you did it,\n             * you just created a function that runs a GAN on the browser!\n            */\n        }).catch(e => {\n            model.dispose();\n        });\n    });\n}\n\n","language":"js","meta":"","className":"language-js shiki shiki-themes dark-plus github-dark","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"// import the library under the tf namespace\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" *"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":" as"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" tf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":" from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":" \"@tensorflow/tfjs\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" generate"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"model"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"    // tf.tidy handles garbage collection to prevent any memory leakage\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    tf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"tidy"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"        // vector of shape [batch_size, encoding_dim]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":"        const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4FC1FF;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" random_vector"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" tf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"randomNormal"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"(["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"100"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"]);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"        // the label tensor, shape is [batch_size, 1]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"        // I am passing the data type as int32 because I want the funciton to return an int,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"        // however the model accepts float numbers not ints this is why I am casting the tensor.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":"        const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4FC1FF;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" label"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" tf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"randomUniform"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"(["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"], "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"int32\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"cast"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"float32\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"        // generate new image\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"        model"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"execute"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"(["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"random_vector"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"label"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"])."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"            // let's dispose of the model since we don't need it in memory any more\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            model"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"dispose"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"            // images are of shape [batch_size, 28, 28]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"            // batch_size here is 1 so we can remove it by squeezing the tensor\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            image"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" image"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"squeeze"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"            // the output of the model ranges from -1 to 1,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"            // let's make it from 0 to 1 since the next funciton is picky\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            image"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" tf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"tf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"tf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"scalar"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")), "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"tf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"scalar"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"            // let's now make the image of rank 3 to make it an appropriate image\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"            // of shape [28, 28, 1] which means a gray scale image\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"            // The second argument of this function is the axis of expansion\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            image"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" tf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"expandDims"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"            // Let's now resize the image from [28, 28, 1] to [200, 200, 1].\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            image"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" tf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"resizeNearestNeighbor"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"img"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"200"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"200"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"]);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"            // Now let's get the canvas element, that we should create in markup, and write this image to it.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":"            const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4FC1FF;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" canvas"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" document"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"getElementById"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"myCanvas\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            tf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"browser"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"toPixels"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"canvas"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            ."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"output"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"                console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"Success\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            })."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"                console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"            /**\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":46},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"             * Horrai!! you did it,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":47},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"             * you just created a function that runs a GAN on the browser!\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":48},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"            */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":49},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"        })."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":50},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            model"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"dispose"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":51},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"        });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":52},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":53},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To know more check out "},{"type":"element","tag":"a","props":{"href":"https://js.tensorflow.org/api/latest/","rel":["nofollow"]},"children":[{"type":"text","value":"TFJS documentation"}]}]}]},{"type":"element","tag":"h2","props":{"id":"demo"},"children":[{"type":"text","value":"Demo"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you want to test the final product see "},{"type":"element","tag":"a","props":{"href":"https://mahmoudyusof.github.io/projects/digit-image-generator","rel":["nofollow"]},"children":[{"type":"text","value":"this demo"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"that-is-it-congratulations"},"children":[{"type":"text","value":"That is it, CONGRATULATIONS."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now you can use client side inference. I should tell you that this is not recommended for resource demanding models, since they might crash the frontend because they require a lot of memory, so extract light weight models only to the client side."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you have any comments, questions or recommendations please reach out to me at any time, I hope this was helpful."}]},{"type":"element","tag":"h2","props":{"id":"full-code"},"children":[{"type":"text","value":"Full Code"}]},{"type":"element","tag":"pre","props":{"code":"// import the library under the tf namespace\nimport * as tf from \"@tensorflow/tfjs\";\n\nfunction generate(model){\n    // tf.tidy handles garbage collection to prevent any memory leakage\n    tf.tidy(() => {\n        // vector of shape [batch_size, encoding_dim]\n        const random_vector = tf.randomNormal([1, 100]);\n\n        // the label tensor, shape is [batch_size, 1]\n        // I am passing the data type as int32 because I want the funciton to return an int,\n        // however the model accepts float numbers not ints this is why I am casting the tensor.\n        const label = tf.randomUniform([1, 1], 0, 10, \"int32\").cast(\"float32\");\n\n        // generate new image\n        model.execute([random_vector, label]).then(image => {\n            // images are of shape [batch_size, 28, 28]\n            // batch_size here is 1 so we can remove it by squeezing the tensor\n            image = image.squeeze();\n\n            // the output of the model ranges from -1 to 1,\n            // let's make it from 0 to 1 since the next funciton is picky\n            image = tf.div(tf.add(image, tf.scalar(1)), tf.scalar(2))\n\n            // let's now make the image of rank 3 to make it an appropriate image\n            // of shape [28, 28, 1] which means a gray scale image\n            // The second argument of this function is the axis of expansion\n            image = tf.expandDims(image, 2);\n\n            // Let's now resize the image from [28, 28, 1] to [200, 200, 1].\n            image = tf.image.resizeNearestNeighbor(img, [200, 200]);\n\n            // Now let's get the canvas element, that we should create in markup, and write this image to it.\n            const canvas = document.getElementById(\"myCanvas\");\n            \n            tf.browser.toPixels(image, canvas)\n            .then(output => {\n                console.log(\"Success\");\n            }).catch(e => {\n                console.log(e);\n            })\n\n            /**\n             * Horrai!! you did it,\n             * you just created a function that runs a GAN on the browser!\n            */\n        });\n    });\n}\n\n// load the model from localstorage\ntf.fromGraphModel(\"localstorage://saved_model_name\")\n    .then(model => {\n        // success case, run the generate function.\n        generate(model);\n    }).catch(e => {\n        // if you fail, load the model from the server\n        tf.fromGraphModel(\"http://model-server-url/model_directory\")\n            .then(model => {\n            // In the chained \"then call\" save the model in localstorage\n            model.save(\"localstorage://saved_model_name\");\n            \n            // run inference\n            generate(model);\n        }).catch(e => {\n            console.log(\"some unexpected error\");\n            console.log(e);\n        });\n    });\n","filename":"generate-images.js","highlights":[4,5,6,7],"language":"js","meta":"","className":"language-js shiki shiki-themes dark-plus github-dark","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"// import the library under the tf namespace\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" *"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":" as"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" tf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":" from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":" \"@tensorflow/tfjs\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":["line","highlight"],"line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" generate"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"model"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":["line","highlight"],"line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"    // tf.tidy handles garbage collection to prevent any memory leakage\n"}]}]},{"type":"element","tag":"span","props":{"class":["line","highlight"],"line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    tf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"tidy"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"(() "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":["line","highlight"],"line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"        // vector of shape [batch_size, encoding_dim]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":"        const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4FC1FF;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" random_vector"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" tf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"randomNormal"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"(["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"100"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"]);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"        // the label tensor, shape is [batch_size, 1]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"        // I am passing the data type as int32 because I want the funciton to return an int,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"        // however the model accepts float numbers not ints this is why I am casting the tensor.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":"        const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4FC1FF;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" label"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" tf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"randomUniform"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"(["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"], "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"int32\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"cast"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"float32\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"        // generate new image\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"        model"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"execute"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"(["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"random_vector"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"label"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"])."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"            // images are of shape [batch_size, 28, 28]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"            // batch_size here is 1 so we can remove it by squeezing the tensor\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            image"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" image"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"squeeze"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"            // the output of the model ranges from -1 to 1,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"            // let's make it from 0 to 1 since the next funciton is picky\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            image"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" tf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"tf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"tf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"scalar"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")), "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"tf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"scalar"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"            // let's now make the image of rank 3 to make it an appropriate image\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"            // of shape [28, 28, 1] which means a gray scale image\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"            // The second argument of this function is the axis of expansion\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            image"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" tf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"expandDims"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"            // Let's now resize the image from [28, 28, 1] to [200, 200, 1].\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            image"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" tf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"resizeNearestNeighbor"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"img"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"200"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"200"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"]);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"            // Now let's get the canvas element, that we should create in markup, and write this image to it.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":"            const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4FC1FF;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" canvas"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" document"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"getElementById"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"myCanvas\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            tf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"browser"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"toPixels"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"canvas"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            ."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"output"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"                console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"Success\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            })."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"                console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"            /**\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"             * Horrai!! you did it,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"             * you just created a function that runs a GAN on the browser!\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":46},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"            */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":47},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"        });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":48},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":49},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":50},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":51},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"// load the model from localstorage\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":52},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"tf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"fromGraphModel"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"localstorage://saved_model_name\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":53},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    ."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"model"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":54},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"        // success case, run the generate function.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":55},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"        generate"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"model"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":56},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    })."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":57},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"        // if you fail, load the model from the server\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":58},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"        tf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"fromGraphModel"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"http://model-server-url/model_directory\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":59},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            ."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"model"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":60},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"            // In the chained \"then call\" save the model in localstorage\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":61},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            model"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"save"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"localstorage://saved_model_name\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":62},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":63},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"            // run inference\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":64},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"            generate"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"model"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":65},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"        })."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":66},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"some unexpected error\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":67},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":68},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"        });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":69},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    });\n"}]}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"why","depth":2,"text":"Why?"},{"id":"how","depth":2,"text":"How?","children":[{"id":"installing-tensorflowjs-converter","depth":3,"text":"Installing tensorflowjs-converter"},{"id":"converting-the-saved-model","depth":3,"text":"Converting the saved model"},{"id":"save-the-model-in-the-browser","depth":3,"text":"Save the model in the browser"}]},{"id":"demo","depth":2,"text":"Demo"},{"id":"that-is-it-congratulations","depth":2,"text":"That is it, CONGRATULATIONS."},{"id":"full-code","depth":2,"text":"Full Code"}]}},"_type":"markdown","_id":"content:blog:0.client-side-inference.md","_source":"content","_file":"blog/0.client-side-inference.md","_extension":"md"},{"_path":"/blog/datagenerator","_dir":"blog","_draft":false,"_partial":false,"_locale":"","title":"Data Generators In Tensorflow","description":"explaining how to load batches of data into memory instead of the entire dataset for more effeciency","project":"facial-keypoint-detection","slug":"data-generator","type":"article","image":"/memory.jpg","url":"https://mahmoudyusof.github.io/facial-keypoint-detection/data-generator/","date":"2020-05-25","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"how-to-use-data-generators-in-tensorflow"},"children":[{"type":"text","value":"How to use data generators in tensorflow"}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"why"},"children":[{"type":"text","value":"Why ?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Believe it or not, but loading the entire dataset in memory is "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"NOT"}]},{"type":"text","value":" the best idea."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nIf you're dealing with a small dataset, that might work, but that is just a waste of resources, and worse if you're working on a huge dataset like the imageNet dataset, this won't work at all."}]},{"type":"element","tag":"h2","props":{"id":"how"},"children":[{"type":"text","value":"HOW ?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Python generators are lazy which means they are iterables that give you the data upon request, unlike regular lists that just store the data in memory all the time."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"tensorflow keras has a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Sequence"}]},{"type":"text","value":" class that can be used for this purpose. "},{"type":"element","tag":"a","props":{"className":["mdlink"],"href":"https://www.tensorflow.org/api_docs/python/tf/keras/utils/Sequence"},"children":[{"type":"text","value":"Sequence Class API Reference"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nlet's jump into it"}]},{"type":"element","tag":"h2","props":{"id":"scenario"},"children":[{"type":"text","value":"Scenario"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Working with images is a good example for this, so let's say that you have pictures of objects that you need to localize,"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nSo your features are images and labels are (x, y, h, w) for coordinate and dimensions of the containing box, and the labels and image names are stored in a csv file."}]},{"type":"element","tag":"h2","props":{"id":"data"},"children":[{"type":"text","value":"Data"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"image_file  "}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"x  "}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"y  "}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"w  "}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"h  "}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"file1.png"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"50"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"50"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"..."}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"..."}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"code"},"children":[{"type":"text","value":"Code"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Let's define an initializer, the initializer is going to take the information needed to get the data such as:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The csv file"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The directory containing all of the images"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It will also take the output shape of the batch"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The output size of each image"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The batch size"}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus github-dark","code":"import numpy as np\nimport pandas as pd\nimport matplotlib.image as mpimg\n\nfrom tensorflow.keras.utils import Sequence\n\nclass DataGenerator(Sequence):\n\n  def __init__(self, csv_file, base_dir, output_size, shuffle=False, batch_size=10):\n  \"\"\"\n  Initializes a data generator object\n    :param csv_file: file in which image names and numeric labels are stored\n    :param base_dir: the directory in which all images are stored\n    :param output_size: image output size after preprocessing\n    :param shuffle: shuffle the data after each epoch\n    :param batch_size: The size of each batch returned by __getitem__\n  \"\"\"\n    self.df = pd.read_csv(csv_file)\n    self.base_dir = base_dir\n    self.output_size = output_size\n    self.shuffle = shuffle\n    self.batch_size = batch_size\n    self.on_epoch_end()\n\n\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" numpy "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" np\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" pandas "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" pd\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" matplotlib.image "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" mpimg\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" tensorflow.keras.utils "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" Sequence\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" DataGenerator"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"Sequence"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":"  def"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" __init__"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"csv_file"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"base_dir"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"output_size"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"shuffle"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"False"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"batch_size"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"  \"\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"  Initializes a data generator object\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"    :param csv_file: file in which image names and numeric labels are stored\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"    :param base_dir: the directory in which all images are stored\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"    :param output_size: image output size after preprocessing\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"    :param shuffle: shuffle the data after each epoch\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"    :param batch_size: The size of each batch returned by __getitem__\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"  \"\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"    self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".df "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" pd.read_csv(csv_file)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"    self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".base_dir "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" base_dir\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"    self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".output_size "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" output_size\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"    self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".shuffle "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" shuffle\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"    self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".batch_size "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" batch_size\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"    self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".on_epoch_end()\n"}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now let's define some special methods starting with the one called in the initializer "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"on_epoch_end()"}]},{"type":"text","value":" that is called after each epoch as the name may suggest, duh!"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We call this method in the initializer because we need the indeces attribute to be set at the begining of the first epoch, otherwise we will get an error telling us that the class has no attribute \"indecies\""}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus github-dark","code":"def on_epoch_end(self):\n  self.indices = np.arange(len(self.df))\n  if self.shuffle:\n    np.random.shuffle(self.indices)\n\n\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":"def"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" on_epoch_end"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"  self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".indices "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" np.arange("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"len"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".df))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"  if"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".shuffle:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    np.random.shuffle("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".indices)\n"}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now we need to define the length of the data, which is not the number of entries as you might think, it's actually the number of batches, this needs to be accessible by the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"len"}]},{"type":"text","value":" function in python so we need to define the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"__len__"}]},{"type":"text","value":" method."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus github-dark","code":"def __len__(self):\n  return int(len(self.df) / self.batch_size)\n\n\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":"def"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" __len__"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"  return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" int"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"len"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".df) "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".batch_size)\n"}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now let's get serious, the fun part is in the next method which is "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"__getitem__"}]},{"type":"text","value":"."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThis function gets called on indexing or slicing like "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"data_generator[0]"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"data_generator[1:3]"}]},{"type":"text","value":" and the index is passed as a parameter to it. Here we call it "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"idx"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In this function we shall load and preprocess the images."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThis will only be fired when keras trys to load a batch, which will save our memory."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You might think splitting this into multiple functions would be a good idea ... and you'd be totally right."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThis function should return a preprocessed batch of data"}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus github-dark","code":"def __getitem__(self, idx):\n  ## Initializing Batch\n  #  that one in the shape is just for a one channel images\n  # if you want to use colored images you might want to set that to 3\n  X = np.empty((self.batch_size, *self.output_size, 1))\n  # (x, y, h, w)\n  y = np.empty((self.batch_size, 4, 1))\n\n  # get the indices of the requested batch\n  indices = self.indices[idx*self.batch_size:(idx+1)*self.batch_size]\n\n  for i, data_index in enumerate(indices):\n    img_path = os.path.join(self.base_dir,\n                self.df.iloc[data_index, 0])\n\n    img = mpimg.imread()\n\n    ## this is where you preprocess the image\n    ## make sure to resize it to be self.output_size\n\n    label = self.df.iloc[data_index, 1:].to_numpy()\n    ## if you have any preprocessing for\n    ## the labels too do it here\n\n    X[i,] = img\n    y[i] = label\n\n  return X, y\n\n\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":"def"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" __getitem__"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"idx"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"  ## Initializing Batch\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"  #  that one in the shape is just for a one channel images\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"  # if you want to use colored images you might want to set that to 3\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"  X "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" np.empty(("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".batch_size, "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".output_size, "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"  # (x, y, h, w)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"  y "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" np.empty(("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".batch_size, "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"  # get the indices of the requested batch\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"  indices "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".indices[idx"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".batch_size:(idx"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".batch_size]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"  for"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" i, data_index "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"in"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" enumerate"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"(indices):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    img_path "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" os.path.join("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".base_dir,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"                self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".df.iloc[data_index, "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"])\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    img "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" mpimg.imread()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"    ## this is where you preprocess the image\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"    ## make sure to resize it to be self.output_size\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    label "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".df.iloc[data_index, "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":":].to_numpy()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"    ## if you have any preprocessing for\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"    ## the labels too do it here\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    X[i,] "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" img\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    y[i] "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" label\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"  return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" X, y\n"}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now you are ready to fit the model to this generator. You can also easily make a validation generator and validate your model against that, all you need to do is make a new instance of the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"DataGenerator"}]},{"type":"text","value":" class, and pass in the validation csv and base directory and you're good to go. That's why I love OOP."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus github-dark","code":"from tensorflow.keras.models import Sequential\n\nmodel = Sequential([\n  ## define the model's architecture\n])\n\ntrain_gen = DataGenerator(\"data.csv\",\n                          \"data\",\n                          (244, 244),\n                          batch_size=20,\n                          shuffle=True)\n\n## compile the model first of course\n\n# now let's train the model\nmodel.fit(train_gen, epochs=5, ...)\n#  note you could also make a validation generator and pass it here like normal datasets\n\n# back in the days you had to do this\n# model.fit_generator(train_gen, ...)\n\n\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" tensorflow.keras.models "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" Sequential\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"model "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" Sequential([\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"  ## define the model's architecture\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"])\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"train_gen "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" DataGenerator("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"data.csv\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"                          \"data\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"                          ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"244"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"244"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"                          batch_size"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"                          shuffle"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"True"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"## compile the model first of course\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"# now let's train the model\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"model.fit(train_gen, "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"epochs"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"#  note you could also make a validation generator and pass it here like normal datasets\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"# back in the days you had to do this\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"# model.fit_generator(train_gen, ...)\n"}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"the-complete-code"},"children":[{"type":"text","value":"The complete code"}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus github-dark","code":"class DataGenerator(Sequence):\n\n  def __init__(self, csv_file, base_dir, output_size, shuffle=False, batch_size=10):\n    \"\"\"\n    Initializes a data generator object\n      :param csv_file: file in which image names and numeric labels are stored\n      :param base_dir: the directory in which all images are stored\n      :param output_size: image output size after preprocessing\n      :param shuffle: shuffle the data after each epoch\n      :param batch_size: The size of each batch returned by __getitem__\n    \"\"\"\n    self.df = pd.read_csv(csv_file)\n    self.base_dir = base_dir\n    self.output_size = output_size\n    self.shuffle = shuffle\n    self.batch_size = batch_size\n    self.on_epoch_end()\n\n  def on_epoch_end(self):\n    self.indices = np.arange(len(self.df))\n    if self.shuffle:\n      np.random.shuffle(self.indices)\n\n  def __len__(self):\n    return int(len(self.df) / self.batch_size)\n\n  def __getitem__(self, idx):\n    ## Initializing Batch\n    #  that one in the shape is just for a one channel images\n    # if you want to use colored images you might want to set that to 3\n    X = np.empty((self.batch_size, *self.output_size, 1))\n    # (x, y, h, w)\n    y = np.empty((self.batch_size, 4, 1))\n\n    # get the indices of the requested batch\n    indices = self.indices[idx*self.batch_size:(idx+1)*self.batch_size]\n\n    for i, data_index in enumerate(indices):\n      img_path = os.path.join(self.base_dir,\n                  self.df.iloc[data_index, 0])\n\n      img = mpimg.imread()\n      img = cv2.cvtColor(img, cv2.COLOR_RGB2GRAY) # to reduce it to one channel to match the shape\n      ## this is where you preprocess the image\n      ## make sure to resize it to be self.output_size\n\n      label = self.df.iloc[data_index, 1:].to_numpy()\n      ## if you have any preprocessing for\n      ## the labels too do it here\n\n      X[i,] = img\n      y[i] = label\n\n    return X, y\n\n\n## Defining and training the model\n\nmodel = Sequential([\n  ## define the model's architecture\n])\n\ntrain_gen = DataGenerator(\"data.csv\", \"data\", (244, 244), batch_size=20, shuffle=True)\n\n## compile the model first of course\n\n# now let's train the model\nmodel.fit(train_gen, epochs=5, ...)\n\n\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" DataGenerator"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"Sequence"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":"  def"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" __init__"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"csv_file"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"base_dir"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"output_size"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"shuffle"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"False"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"batch_size"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"    \"\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"    Initializes a data generator object\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"      :param csv_file: file in which image names and numeric labels are stored\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"      :param base_dir: the directory in which all images are stored\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"      :param output_size: image output size after preprocessing\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"      :param shuffle: shuffle the data after each epoch\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"      :param batch_size: The size of each batch returned by __getitem__\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"    \"\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"    self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".df "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" pd.read_csv(csv_file)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"    self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".base_dir "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" base_dir\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"    self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".output_size "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" output_size\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"    self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".shuffle "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" shuffle\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"    self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".batch_size "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" batch_size\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"    self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".on_epoch_end()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":"  def"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" on_epoch_end"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"    self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".indices "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" np.arange("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"len"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".df))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    if"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".shuffle:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"      np.random.shuffle("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".indices)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":"  def"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" __len__"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" int"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"len"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".df) "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".batch_size)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":"  def"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" __getitem__"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"idx"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"    ## Initializing Batch\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"    #  that one in the shape is just for a one channel images\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"    # if you want to use colored images you might want to set that to 3\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    X "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" np.empty(("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".batch_size, "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".output_size, "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"    # (x, y, h, w)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    y "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" np.empty(("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".batch_size, "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"    # get the indices of the requested batch\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    indices "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".indices[idx"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".batch_size:(idx"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".batch_size]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    for"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" i, data_index "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"in"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" enumerate"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"(indices):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"      img_path "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" os.path.join("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".base_dir,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"                  self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".df.iloc[data_index, "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"])\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"      img "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" mpimg.imread()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"      img "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" cv2.cvtColor(img, cv2."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"COLOR_RGB2GRAY"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"# to reduce it to one channel to match the shape\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"      ## this is where you preprocess the image\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"      ## make sure to resize it to be self.output_size\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":46},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":47},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"      label "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":".df.iloc[data_index, "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":":].to_numpy()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":48},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"      ## if you have any preprocessing for\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":49},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"      ## the labels too do it here\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":50},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":51},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"      X[i,] "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" img\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":52},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"      y[i] "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" label\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":53},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":54},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" X, y\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":55},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":56},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":57},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"## Defining and training the model\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":58},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":59},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"model "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" Sequential([\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":60},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"  ## define the model's architecture\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":61},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"])\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":62},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":63},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"train_gen "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" DataGenerator("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"data.csv\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"data\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"244"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"244"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"), "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"batch_size"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"shuffle"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"True"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":64},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":65},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"## compile the model first of course\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":66},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":67},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"# now let's train the model\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":68},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"model.fit(train_gen, "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"epochs"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")\n"}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"And that's it.. you've just created your dataset generator that loads the data into memory batch by batch instead of the whole thing at once."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nI hope this was useful."}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"className":["mdlink"],"href":"https://stanford.edu/~shervine/blog/keras-how-to-generate-data-on-the-fly"},"children":[{"type":"text","value":"Reference Article"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"className":["mdlink"],"href":"https://github.com/mahmoudyusof/facial_keypoint_detection"},"children":[{"type":"text","value":"My Notebooks"}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"why","depth":2,"text":"Why ?"},{"id":"how","depth":2,"text":"HOW ?"},{"id":"scenario","depth":2,"text":"Scenario"},{"id":"data","depth":2,"text":"Data"},{"id":"code","depth":2,"text":"Code"},{"id":"the-complete-code","depth":2,"text":"The complete code"}]}},"_type":"markdown","_id":"content:blog:1.datagenerator.md","_source":"content","_file":"blog/1.datagenerator.md","_extension":"md"},{"_path":"/blog/scikit-learn-pipelines","_dir":"blog","_draft":false,"_partial":false,"_locale":"","title":"A Comprehensive Guide For scikit-learn Pipelines","description":"Going through a step by step guide for building machine learning pipelines for data preprocessing and inference, also covering how preprocess different columns with different transformers, how to add custom transformers, and how to save and load complete pipelines","project":"general","slug":"scikit-learn-pipelines","type":"article","image":"/pipeline.jpg","url":"https://mahmoudyusof.github.io/general/scikit-learn-pipelines/","date":"2021-01-26","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"a-comprehensive-guide-for-scikit-learn-pipelines"},"children":[{"type":"text","value":"A Comprehensive Guide For scikit-learn Pipelines"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Scikit Learn has a very easy and useful architecture for building complete pipelines for machine learning. In this article, we'll go through a step by step example on how to used the different features and classes of this architecture."}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"why"},"children":[{"type":"text","value":"Why?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There are plenty of reasons why you might want to use a pipeline for machine learning like:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Combine the preprocessing step with the inference step at one object."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Save the complete pipeline to disk."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Easily experiment with different techniques of preprocessing."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Pipeline reuse."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Easy cloud deployment."}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"how"},"children":[{"type":"text","value":"How?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Alright, now let's get down to business. In this article we'll use a fairly easy and old problem as an example, which is the "},{"type":"element","tag":"a","props":{"className":["mdlink"],"href":"https://www.kaggle.com/c/home-data-for-ml-course"},"children":[{"type":"text","value":"Regression problem for predicting housing prices"}]},{"type":"text","value":"."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nDownload the data and you should have a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"train.csv"}]},{"type":"text","value":" file and a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"test.csv"}]},{"type":"text","value":" file, we'll load both using pandas."}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h3","props":{"id":"loading-the-data"},"children":[{"type":"text","value":"Loading the data"}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus github-dark","code":"import pandas as pd\nimport numpy as np\n\ntrain_df = pd.read_csv(\"train.csv\")\ntest_df = pd.read_csv(\"test.csv\")\n\n## let's create a validation set from the training set\n\nmsk = np.random.rand(len(train_df)) < 0.8\n\nval_df = train_df[~msk]\n\ntrain_df = train_df[msk]\n\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" pandas "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" pd\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" numpy "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" np\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"train_df "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" pd.read_csv("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"train.csv\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"test_df "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" pd.read_csv("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"test.csv\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"## let's create a validation set from the training set\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"msk "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" np.random.rand("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"len"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"(train_df)) "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" 0.8\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"val_df "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" train_df["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"~"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"msk]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"train_df "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" train_df[msk]\n"}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h3","props":{"id":"feature-selection"},"children":[{"type":"text","value":"Feature selection"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This data has 163 columns, however, we are not going to use all of them."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nAfter doing a bit of EDA we choose a set of nominal, ordinal and numerical columns to work with."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus github-dark","code":"\nnominal = [\"MSZoning\", \"LotShape\", \"LandContour\", \"LotConfig\", \"Neighborhood\",\n           \"Condition1\", \"BldgType\", \"RoofStyle\",\n           \"Foundation\", \"CentralAir\", \"SaleType\", \"SaleCondition\"]\n\nordinal = [\"LandSlope\", \"OverallQual\", \"OverallCond\", \"YearRemodAdd\",\n          \"ExterQual\", \"ExterCond\", \"BsmtQual\", \"BsmtCond\", \"BsmtExposure\",\n          \"KitchenQual\", \"Functional\", \"GarageCond\", \"PavedDrive\"]\n\nnumerical = [\"LotFrontage\", \"LotArea\", \"MasVnrArea\", \"BsmtFinSF1\", \"BsmtUnfSF\",\n            \"TotalBsmtSF\", \"1stFlrSF\", \"2ndFlrSF\", \"GrLivArea\", \"GarageArea\",\n            \"OpenPorchSF\"]\n\ntrain_features = train_df[nominal + ordinal + numerical]\ntrain_label = train_df[\"SalePrice\"]\n\nval_features = val_df[nominal + ordinal + numerical]\nval_label = val_df[\"SalePrice\"]\n\ntest_features = test_df[nominal + ordinal + numerical]\n\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"nominal "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"MSZoning\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"LotShape\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"LandContour\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"LotConfig\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"Neighborhood\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"           \"Condition1\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"BldgType\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"RoofStyle\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"           \"Foundation\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"CentralAir\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"SaleType\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"SaleCondition\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"ordinal "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"LandSlope\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"OverallQual\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"OverallCond\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"YearRemodAdd\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"          \"ExterQual\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"ExterCond\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"BsmtQual\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"BsmtCond\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"BsmtExposure\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"          \"KitchenQual\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"Functional\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"GarageCond\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"PavedDrive\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"numerical "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"LotFrontage\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"LotArea\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"MasVnrArea\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"BsmtFinSF1\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"BsmtUnfSF\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"            \"TotalBsmtSF\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"1stFlrSF\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"2ndFlrSF\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"GrLivArea\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"GarageArea\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"            \"OpenPorchSF\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"train_features "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" train_df[nominal "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" ordinal "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" numerical]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"train_label "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" train_df["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"SalePrice\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"val_features "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" val_df[nominal "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" ordinal "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" numerical]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"val_label "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" val_df["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"SalePrice\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"test_features "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" test_df[nominal "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" ordinal "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" numerical]\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you want to see the entire selection process and EDA fully explained, you can see the notebook "},{"type":"element","tag":"a","props":{"className":["mdlink"],"href":"https://www.kaggle.com/mahmoud1youssef/housing-prices-full-solution"},"children":[{"type":"text","value":"here"}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h3","props":{"id":"preprocessing"},"children":[{"type":"text","value":"Preprocessing"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now let's choose a preprocessing plan, a very straight forward one is the following:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Ordinal features\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Impute missing data with most frequent value"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Use Ordinal Encoding"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Nominal Features\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Impute missing data with most frequent value"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Use One Hot Encoding"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Numerical Features\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Impute missing data with mean value"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Use Standard Scaling"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As you may see, each family of features has its own unique way of getting processed. Let's create a Pipeline for each family."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nWe can do so by using the "},{"type":"element","tag":"a","props":{"className":["mdlink"],"href":"https://scikit-learn.org/stable/modules/generated/sklearn.pipeline.Pipeline.html"},"children":[{"type":"text","value":"sklearn.pipeline.Pipeline"}]},{"type":"text","value":" Object"}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus github-dark","code":"from sklearn.pipeline import Pipeline\nfrom sklearn.impute import SimpleImputer\nfrom sklearn.preprocessing import StandardScaler, OrdinalEncoder, OneHotEncoder\n\nordinal_pipeline = Pipeline([\n    (\"imputer\", SimpleImputer(strategy=\"most_frequent\")),\n    (\"encoder\", OrdinalEncoder())\n])\n\nnominal_pipeline = Pipeline([\n    (\"imputer\", SimpleImputer(strategy=\"most_frequent\")),\n    (\"encoder\", OneHotEncoder(sparse=True, handle_unknown=\"ignore\"))\n])\n\nnumerical_pipeline = Pipeline([\n    (\"imputer\", SimpleImputer(strategy=\"mean\")),\n    (\"scaler\", StandardScaler())\n])\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" sklearn.pipeline "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" Pipeline\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" sklearn.impute "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" SimpleImputer\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" sklearn.preprocessing "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" StandardScaler, OrdinalEncoder, OneHotEncoder\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"ordinal_pipeline "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" Pipeline([\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"imputer\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", SimpleImputer("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"strategy"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"most_frequent\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"encoder\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", OrdinalEncoder())\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"])\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"nominal_pipeline "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" Pipeline([\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"imputer\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", SimpleImputer("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"strategy"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"most_frequent\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"encoder\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", OneHotEncoder("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"sparse"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"True"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"handle_unknown"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"ignore\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"])\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"numerical_pipeline "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" Pipeline([\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"imputer\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", SimpleImputer("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"strategy"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"mean\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"scaler\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", StandardScaler())\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"])\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now let's join all of the above in one pipeline that targets each column with its family's pipeline."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nWe can do so using the "},{"type":"element","tag":"a","props":{"className":["mdlink"],"href":"https://scikit-learn.org/stable/modules/generated/sklearn.compose.ColumnTransformer.html?highlight=columntransformer#sklearn.compose.ColumnTransformer"},"children":[{"type":"text","value":"sklearn.compose.ColumnTransformer"}]},{"type":"text","value":" Object"}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus github-dark","code":"from sklearn.compose import ColumnTransformer\n\n# here we are going to instantiate a ColumnTransformer object with a list of tuples\n# each of which has a the name of the preprocessor\n# the transformation pipeline (could be a transformer)\n# and the list of column names we wish to transform\n\npreprocessing_pipeline = ColumnTransformer([\n    (\"nominal_preprocessor\", nominal_pipeline, nominal),\n    (\"ordinal_preprocessor\", ordinal_pipeline, ordinal),\n    (\"numerical_preprocessor\", numerical_pipeline, numerical)\n])\n\n## If you want to test this pipeline run the following code\n\n# preprocessed_features = preprocessing_pipeline.fit_transform(train_features)\n\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" sklearn.compose "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" ColumnTransformer\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"# here we are going to instantiate a ColumnTransformer object with a list of tuples\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"# each of which has a the name of the preprocessor\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"# the transformation pipeline (could be a transformer)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"# and the list of column names we wish to transform\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"preprocessing_pipeline "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" ColumnTransformer([\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"nominal_preprocessor\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", nominal_pipeline, nominal),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"ordinal_preprocessor\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", ordinal_pipeline, ordinal),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"numerical_preprocessor\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", numerical_pipeline, numerical)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"])\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"## If you want to test this pipeline run the following code\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"# preprocessed_features = preprocessing_pipeline.fit_transform(train_features)\n"}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h3","props":{"id":"adding-the-model-to-the-pipeline"},"children":[{"type":"text","value":"Adding the model to the pipeline"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now that we're done creating the preprocessing pipeline let's add the model to the end."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus github-dark","code":"from sklearn.linear_model import LinearRegression\n\ncomplete_pipeline = Pipeline([\n    (\"preprocessor\", preprocessing_pipeline),\n    (\"estimator\", LinearRegression())\n])\n\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" sklearn.linear_model "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" LinearRegression\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"complete_pipeline "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" Pipeline([\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"preprocessor\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", preprocessing_pipeline),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"estimator\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", LinearRegression())\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"])\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you're waiting for the rest of the code, I'd like to tell you that that's it. Pretty easy isn't it. If the scikit-learn maintainers ask to take my heart I'd give it to them for such great API."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThe training and evaluation process is the same as any normal model"}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus github-dark","code":"complete_pipeline.fit(train_features, train_label)\nscore = complete_pipeline.score(val_features, val_label)\n\nprint(score)\n\npredictions = complete_pipeline.predict(test_features)\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"complete_pipeline.fit(train_features, train_label)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"score "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" complete_pipeline.score(val_features, val_label)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"(score)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"predictions "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" complete_pipeline.predict(test_features)\n"}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"saving-and-loading-pipelines"},"children":[{"type":"text","value":"Saving and Loading Pipelines"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now we want to save the entire preprocessing parameters and model parameters of this pipeline to disk and load it whenever needed."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nWe are going to use "},{"type":"element","tag":"a","props":{"href":"https://joblib.readthedocs.io/en/latest/","className":["mdlink"]},"children":[{"type":"text","value":"joblib"}]},{"type":"text","value":" for this "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"JOB"}]},{"type":"text","value":" ... get it? ... sorry."}]},{"type":"element","tag":"h3","props":{"id":"save-the-pipeline"},"children":[{"type":"text","value":"Save the pipeline"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We are going to save the model as a pickle (.pkl) file. The code is fairly simple."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus github-dark","code":"import joblib\n\npipeline_filename = \"my_pipeline.pkl\"\njoblib.dump(complete_pipeline, pipeline_filename)\n\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" joblib\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"pipeline_filename "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":" \"my_pipeline.pkl\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"joblib.dump(complete_pipeline, pipeline_filename)\n"}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h3","props":{"id":"load-the-pipeline"},"children":[{"type":"text","value":"Load the pipeline"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now you're on your flask server and you wish to load the model to help a user predict the price of a house, so you want to load the model from disk when you start the server, or whenever a request is sent. That is also fairly simple."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus github-dark","code":"import joblib\n\npipeline_filename = \"path/to/pipeline/file.pkl\"\n\npipeline = joblib.load(pipeline_filename)\n\n## do inference with pipeline.predict\n# ...\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" joblib\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"pipeline_filename "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":" \"path/to/pipeline/file.pkl\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"pipeline "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" joblib.load(pipeline_filename)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"## do inference with pipeline.predict\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"# ...\n"}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"full-code"},"children":[{"type":"text","value":"Full Code"}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus github-dark","code":"\nimport pandas as pd\nimport numpy as np\n\ntrain_df = pd.read_csv(\"train.csv\")\ntest_df = pd.read_csv(\"test.csv\")\n\n## let's create a validation set from the training set\n\nmsk = np.random.rand(len(train_df)) < 0.8\n\nval_df = train_df[~msk]\n\ntrain_df = train_df[msk]\n\n\nnominal = [\"MSZoning\", \"LotShape\", \"LandContour\", \"LotConfig\", \"Neighborhood\",\n           \"Condition1\", \"BldgType\", \"RoofStyle\",\n           \"Foundation\", \"CentralAir\", \"SaleType\", \"SaleCondition\"]\n\nordinal = [\"LandSlope\", \"OverallQual\", \"OverallCond\", \"YearRemodAdd\",\n          \"ExterQual\", \"ExterCond\", \"BsmtQual\", \"BsmtCond\", \"BsmtExposure\",\n          \"KitchenQual\", \"Functional\", \"GarageCond\", \"PavedDrive\"]\n\nnumerical = [\"LotFrontage\", \"LotArea\", \"MasVnrArea\", \"BsmtFinSF1\", \"BsmtUnfSF\",\n            \"TotalBsmtSF\", \"1stFlrSF\", \"2ndFlrSF\", \"GrLivArea\", \"GarageArea\",\n            \"OpenPorchSF\"]\n\ntrain_features = train_df[nominal + ordinal + numerical]\ntrain_label = train_df[\"SalePrice\"]\n\nval_features = val_df[nominal + ordinal + numerical]\nval_label = val_df[\"SalePrice\"]\n\ntest_features = test_df[nominal + ordinal + numerical]\n\n\nfrom sklearn.pipeline import Pipeline\nfrom sklearn.impute import SimpleImputer\nfrom sklearn.preprocessing import StandardScaler, OrdinalEncoder, OneHotEncoder\n\nordinal_pipeline = Pipeline([\n    (\"imputer\", SimpleImputer(strategy=\"most_frequent\")),\n    (\"encoder\", OrdinalEncoder())\n])\n\nnominal_pipeline = Pipeline([\n    (\"imputer\", SimpleImputer(strategy=\"most_frequent\")),\n    (\"encoder\", OneHotEncoder(sparse=True, handle_unknown=\"ignore\"))\n])\n\nnumerical_pipeline = Pipeline([\n    (\"imputer\", SimpleImputer(strategy=\"mean\")),\n    (\"scaler\", StandardScaler())\n])\n\n\nfrom sklearn.compose import ColumnTransformer\n\n# here we are going to instantiate a ColumnTransformer object with a list of tuples\n# each of which has a the name of the preprocessor\n# the transformation pipeline (could be a transformer)\n# and the list of column names we wish to transform\n\npreprocessing_pipeline = ColumnTransformer([\n    (\"nominal_preprocessor\", nominal_pipeline, nominal),\n    (\"ordinal_preprocessor\", ordinal_pipeline, ordinal),\n    (\"numerical_preprocessor\", numerical_pipeline, numerical)\n])\n\n## If you want to test this pipeline run the following code\n\n# preprocessed_features = preprocessing_pipeline.fit_transform(train_features)\n\n\nfrom sklearn.linear_model import LinearRegression\n\ncomplete_pipeline = Pipeline([\n    (\"preprocessor\", preprocessing_pipeline),\n    (\"estimator\", LinearRegression())\n])\n\n\ncomplete_pipeline.fit(train_features, train_label)\nscore = complete_pipeline.score(val_features, val_label)\n\nprint(score)\n\npredictions = complete_pipeline.predict(test_features)\n\n\nimport joblib\n\npipeline_filename = \"my_pipeline.pkl\"\njoblib.dump(complete_pipeline, pipeline_filename)\n\n\npipeline = joblib.load(pipeline_filename)\n\npredictions = pipeline.predict(test_df)\nprint(predictions)\n\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" pandas "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" pd\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" numpy "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" np\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"train_df "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" pd.read_csv("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"train.csv\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"test_df "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" pd.read_csv("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"test.csv\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"## let's create a validation set from the training set\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"msk "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" np.random.rand("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"len"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"(train_df)) "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" 0.8\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"val_df "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" train_df["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"~"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"msk]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"train_df "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" train_df[msk]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"nominal "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"MSZoning\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"LotShape\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"LandContour\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"LotConfig\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"Neighborhood\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"           \"Condition1\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"BldgType\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"RoofStyle\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"           \"Foundation\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"CentralAir\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"SaleType\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"SaleCondition\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"ordinal "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"LandSlope\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"OverallQual\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"OverallCond\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"YearRemodAdd\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"          \"ExterQual\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"ExterCond\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"BsmtQual\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"BsmtCond\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"BsmtExposure\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"          \"KitchenQual\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"Functional\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"GarageCond\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"PavedDrive\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"numerical "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"LotFrontage\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"LotArea\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"MasVnrArea\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"BsmtFinSF1\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"BsmtUnfSF\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"            \"TotalBsmtSF\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"1stFlrSF\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"2ndFlrSF\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"GrLivArea\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"GarageArea\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"            \"OpenPorchSF\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"train_features "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" train_df[nominal "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" ordinal "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" numerical]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"train_label "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" train_df["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"SalePrice\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"val_features "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" val_df[nominal "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" ordinal "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" numerical]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"val_label "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" val_df["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"SalePrice\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"test_features "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" test_df[nominal "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" ordinal "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" numerical]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" sklearn.pipeline "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" Pipeline\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" sklearn.impute "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" SimpleImputer\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" sklearn.preprocessing "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" StandardScaler, OrdinalEncoder, OneHotEncoder\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"ordinal_pipeline "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" Pipeline([\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"imputer\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", SimpleImputer("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"strategy"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"most_frequent\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"encoder\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", OrdinalEncoder())\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"])\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":46},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":47},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"nominal_pipeline "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" Pipeline([\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":48},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"imputer\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", SimpleImputer("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"strategy"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"most_frequent\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":49},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"encoder\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", OneHotEncoder("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"sparse"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"True"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"handle_unknown"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"ignore\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":50},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"])\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":51},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":52},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"numerical_pipeline "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" Pipeline([\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":53},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"imputer\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", SimpleImputer("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"strategy"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"mean\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":54},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"scaler\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", StandardScaler())\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":55},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"])\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":56},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":57},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":58},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" sklearn.compose "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" ColumnTransformer\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":59},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":60},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"# here we are going to instantiate a ColumnTransformer object with a list of tuples\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":61},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"# each of which has a the name of the preprocessor\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":62},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"# the transformation pipeline (could be a transformer)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":63},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"# and the list of column names we wish to transform\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":64},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":65},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"preprocessing_pipeline "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" ColumnTransformer([\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":66},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"nominal_preprocessor\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", nominal_pipeline, nominal),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":67},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"ordinal_preprocessor\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", ordinal_pipeline, ordinal),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":68},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"numerical_preprocessor\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", numerical_pipeline, numerical)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":69},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"])\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":70},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":71},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"## If you want to test this pipeline run the following code\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":72},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":73},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"# preprocessed_features = preprocessing_pipeline.fit_transform(train_features)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":74},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":75},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":76},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" sklearn.linear_model "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" LinearRegression\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":77},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":78},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"complete_pipeline "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" Pipeline([\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":79},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"preprocessor\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", preprocessing_pipeline),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":80},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"estimator\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", LinearRegression())\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":81},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"])\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":82},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":83},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":84},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"complete_pipeline.fit(train_features, train_label)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":85},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"score "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" complete_pipeline.score(val_features, val_label)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":86},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":87},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"(score)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":88},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":89},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"predictions "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" complete_pipeline.predict(test_features)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":90},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":91},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":92},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" joblib\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":93},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":94},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"pipeline_filename "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":" \"my_pipeline.pkl\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":95},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"joblib.dump(complete_pipeline, pipeline_filename)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":96},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":97},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":98},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"pipeline "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" joblib.load(pipeline_filename)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":99},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":100},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"predictions "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" pipeline.predict(test_df)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":101},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"print"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"(predictions)\n"}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"That's it, Congratulations, you've just created, saved and loaded your complete pipeline."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nI hope this article was helpful, if not, please tell me how to improve it, I would really appreciate that.\nThank you."}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"className":["mdlink"],"href":"https://www.oreilly.com/library/view/hands-on-machine-learning/9781492032632/"},"children":[{"type":"text","value":"Reference Book"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"className":["mdlink"],"href":"https://www.kaggle.com/mahmoud1youssef/housing-prices-full-solution"},"children":[{"type":"text","value":"My Notebook"}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"why","depth":2,"text":"Why?"},{"id":"how","depth":2,"text":"How?","children":[{"id":"loading-the-data","depth":3,"text":"Loading the data"},{"id":"feature-selection","depth":3,"text":"Feature selection"},{"id":"preprocessing","depth":3,"text":"Preprocessing"},{"id":"adding-the-model-to-the-pipeline","depth":3,"text":"Adding the model to the pipeline"}]},{"id":"saving-and-loading-pipelines","depth":2,"text":"Saving and Loading Pipelines","children":[{"id":"save-the-pipeline","depth":3,"text":"Save the pipeline"},{"id":"load-the-pipeline","depth":3,"text":"Load the pipeline"}]},{"id":"full-code","depth":2,"text":"Full Code"}]}},"_type":"markdown","_id":"content:blog:3.scikit-learn-pipelines.md","_source":"content","_file":"blog/3.scikit-learn-pipelines.md","_extension":"md"},{"_path":"/blog/handle-unwanted-rerendering","_dir":"blog","_draft":false,"_partial":false,"_locale":"","title":"Handle Unwanted Re-Rendering In Vue","description":"A guide to only rendering components that need to be rendered and some best practices","type":"article","date":"2024-06-14","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"handle-unwanted-re-rendering-in-vue"},"children":[{"type":"text","value":"Handle Unwanted Re-Rendering In Vue"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Maybe you've asked yourself before \"Why is this component re-rendering?\" or \"Why is this request being sent again?\" or \"If only there's a way to explicitly specify which state this component tracks!\" then continue reading."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In this article, we will go through when to expect component re-renders and how to avoid unwanted re-rendering. But let's start from the beginning."}]},{"type":"element","tag":"h2","props":{"id":"how-reactivity-works-in-vuereact"},"children":[{"type":"text","value":"How Reactivity Works in Vue/React"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"At this point the term 'virtual DOM' doesn't scare anyone, it has been the way React, Angular and Vue handle reactivity (this is about to change and we'll talk about it), but let's go through how reactivity works in loose terms."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Initially, a VDOM tree is constructed with all the components"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"When the state of a particular component changes, a VDOM sub-tree is re-evaluated"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Then a diff between the current and the next VDOM is computed"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Finally, the DOM updates are performed"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"NOTE:"}]},{"type":"text","value":" This is not the case for frameworks like Qwik and Solid as they reflect state changes to the DOM directly; more about that in future articles."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In React and Angular, this VDOM sub-tree starts from the component that owns the state change and affects all of its children."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nIn vue, however, things are a bit different."}]},{"type":"element","tag":"h2","props":{"id":"refs-signals-before-they-were-cool"},"children":[{"type":"text","value":"Refs (signals before they were cool)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We can think of signals as values that one can read, update, or watch (subscribe to)."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nGiven that description, signals are refs in vue (but y'all like solid)."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In a vue component, if that component is reading the value of a ref then it is automatically watching (or subscribing to) that ref as well, which means any component that uses this value will render when that value changes."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In light of the previous statement let's take a look at the following structure"}]},{"type":"element","tag":"pre","props":{"className":"language-vue shiki shiki-themes dark-plus github-dark","code":"<template>\n    <MidComponent :state=\"state\" />\n</template>\n","filename":"Parent.vue","language":"vue","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"MidComponent"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" :"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"state"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"state"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" />\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-vue shiki shiki-themes dark-plus github-dark","code":"<template>\n    <Child :state=\"state\" />\n</template>\n","filename":"MidComponent.vue","language":"vue","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"Child"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" :"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"state"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"state"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" />\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Again, in light of that statement above, one would assume that if "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"MidComponent"}]},{"type":"text","value":" doesn't use "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"state"}]},{"type":"text","value":", then if it changes that wouldn't cause it to re-render, right? (React devs of course don't think so)."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Well no really, the reason being that passing state as props even if they are not used in the component unwraps a ref, which means that the intermediate component is now a subscriber to that ref/signal."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Luckely there is an easy solution for that problem."}]},{"type":"element","tag":"h2","props":{"id":"provide-inject"},"children":[{"type":"text","value":"Provide / Inject"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As we said, passing props to a component even if the component is not using the value of these props results in:"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Prop drilling"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"unwanted rendering (unwanted subscribing to the signal or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ref"}]},{"type":"text","value":")"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The provide / inject pattern solves both of those problems, and here is how it works"}]},{"type":"element","tag":"pre","props":{"className":"language-vue shiki shiki-themes dark-plus github-dark","code":"<template>\n    <MidComponent />\n</template>\n\n<script setup>\n    import {ref, provide} from \"vue\";\n    const count = ref(0);\n    provide(\"count\", count);\n</script>\n","filename":"Parent.vue","language":"vue","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"MidComponent"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" />\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" setup"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"ref"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"provide"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"} "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":" \"vue\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4FC1FF;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" count"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" ref"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"    provide"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"count\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"count"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-vue shiki shiki-themes dark-plus github-dark","code":"<template>\n    <span>{{ count }}</span>\n</template>\n\n<script setup>\n    import { inject } from \"vue\";\n    const count = inject(\"count\");\n</script>\n","filename":"Child.vue","language":"vue","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"span"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"{{ "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"count"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" }}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"span"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" setup"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"inject"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":" \"vue\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4FC1FF;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" count"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" inject"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"count\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"reduce-dependencies-with-v-once-and-v-memo"},"children":[{"type":"text","value":"Reduce Dependencies With "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"v-once"}]},{"type":"text","value":" And "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"v-memo"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"These are rarely used directives in vue, so I believe it is better to describe a use case before we talk about them."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nLet's take a look at the following code:"}]},{"type":"element","tag":"pre","props":{"className":"language-vue shiki shiki-themes dark-plus github-dark","code":"<template>\n    <form @submit.prevent=\"handleSubmit\">\n        <input type=\"text\" placeholder=\"Username\" v-model=\"username\" />\n        <input type=\"email\" placeholder=\"email\" v-model=\"password\" />\n\n        <input type=\"submit\" value=\"Submit\" />\n    </form>\n\n    <Serializer :username=\"username\" :password=\"password\" :response=\"response\" />\n</template>\n\n<script setup>\n    import {ref} from \"vue\"\n    const username = ref(\"\")\n    const password = ref(\"\")\n    const response = ref(null)\n\n    const handleSubmit = () => {\n        fetch(\"/api\").then(res => res.json()).then(res => {\n            response.value = res\n        }).catch(e => {\n            // error handling\n        })\n    }\n</script>\n","filename":"Form.vue","language":"vue","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"form"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" @"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"submit"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"prevent"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"handleSubmit"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"input"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" type"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"text\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" placeholder"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"Username\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" v-model"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"username"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" />\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"input"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" type"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"email\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" placeholder"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"email\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" v-model"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"password"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" />\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"input"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" type"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"submit\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" value"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"Submit\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" />\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    </"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"form"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"Serializer"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" :"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"username"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"username"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" :"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"password"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"password"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" :"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"response"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"response"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" />\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" setup"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"ref"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"} "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":" \"vue\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4FC1FF;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" username"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" ref"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4FC1FF;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" password"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" ref"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4FC1FF;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" response"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" ref"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" handleSubmit"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"        fetch"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"/api\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"res"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" res"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"json"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"())."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"res"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            response"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" res\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"        })."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"            // error handling\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"        })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-vue shiki shiki-themes dark-plus github-dark","code":"<template>\n    <div>\n        <p>username: {{ username }}</p>\n        <p>password: {{ password }}</p>\n        <pre>\n            {{ JSON.stringify(response) }}\n        </pre>\n    </div>\n</template>\n\n<script setup>\n    defineProps({\n        username: String,\n        password: String,\n        response: Object\n    })\n</script>\n","filename":"Serializer.vue","language":"vue","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"username: {{ "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"username"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" }}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"password: {{ "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"password"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" }}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"pre"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"            {{ "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4FC1FF;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"JSON"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"stringify"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"response"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":") }}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"        </"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"pre"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    </"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" setup"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"    defineProps"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"        username:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" String"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"        password:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" String"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"        response:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" Object\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now, even though "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Serializer"}]},{"type":"text","value":" takes in "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"username"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"password"}]},{"type":"text","value":" as props, we might not want it to trigger a render every time they change; we might want to change only when we get a different response. We can achieve such behavior using the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"v-memo"}]},{"type":"text","value":" directive, like this:"}]},{"type":"element","tag":"pre","props":{"className":"language-vue shiki shiki-themes dark-plus github-dark","code":"<template>\n<!-- ... -->\n    <Serializer :username=\"username\" :password=\"password\" :response=\"response\" v-memo=\"[response]\" />\n<!-- ... -->\n</template>\n","filename":"Form.vue","language":"vue","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"<!-- ... -->\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"Serializer"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" :"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"username"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"username"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" :"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"password"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"password"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" :"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"response"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"response"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" v-memo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"response"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"]"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" />\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"<!-- ... -->\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This tells vue that the only dependency is "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"response"}]},{"type":"text","value":"; if we pass an empty array that would indicate that we only want to render a snapshot of the props, which is what "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"v-once"}]},{"type":"text","value":" directive does. In that case, the component only renders when its internal state changes, not caring about the parent's state."}]},{"type":"element","tag":"h2","props":{"id":"v-dom-vs-dom-node-updates"},"children":[{"type":"text","value":"V-DOM vs DOM node updates"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When we talk about the V-DOM subtree update, even if (at best) we update only a single V-DOM node, that could be a lot of HTML (DOM nodes), a lot of which might not depend on the state."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThis is also true if the internal component state changes, the entire component will be re-created, even though most of its contents might be static HTML."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nThis is always the case whith V-DOM-based frameworks like React, Angular, and Vue."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nVue, however, uses the compiler to reduce the work needed at runtime mainly via two things:"}]},{"type":"element","tag":"h3","props":{"id":"_1-static-hoisting"},"children":[{"type":"text","value":"1. Static Hoisting"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This gets rid of the problem of static content; the compiler finds chunks of static HTML and creates a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"staticVNode"}]},{"type":"text","value":" for them that can be reused in the render function, and here is an example."}]},{"type":"element","tag":"pre","props":{"className":"language-html shiki shiki-themes dark-plus github-dark","code":"<div>\n  <p class=\"vue\">Vue.js is Cool</p>\n  <p class=\"solid\">Solid.js is also Cool</p>\n  <p class=\"vue\">Vue.js is Cool</p>\n  <p class=\"solid\">Solid.js is also Cool</p>\n  <p class=\"solid\">React is cool</p>\n  <p>{{agree}}</p>\n</div>\n","language":"html","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"vue\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"Vue.js is Cool"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"solid\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"Solid.js is also Cool"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"vue\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"Vue.js is Cool"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"solid\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"Solid.js is also Cool"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"solid\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"React is cool"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"{{agree}}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#85E89D"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-javascript shiki shiki-themes dark-plus github-dark","code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createStaticVNode as _createStaticVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createStaticVNode(\"<p class=\\\"vue\\\">Vue.js is Cool</p><p class=\\\"solid\\\">Solid.js is also Cool</p><p class=\\\"vue\\\">Vue.js is Cool</p><p class=\\\"solid\\\">Solid.js is also Cool</p><p class=\\\"solid\\\">React is cool</p>\", 5)\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _hoisted_1,\n    _createElementVNode(\"p\", null, _toDisplayString(_ctx.agree), 1 /* TEXT */)\n  ]))\n}\n","language":"javascript","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"createElementVNode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":" as"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" _createElementVNode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"toDisplayString"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":" as"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" _toDisplayString"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"createStaticVNode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":" as"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" _createStaticVNode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"openBlock"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":" as"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" _openBlock"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"createElementBlock"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":" as"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" _createElementBlock"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":" \"vue\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4FC1FF;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" _hoisted_1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#F97583"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":" /*#__PURE__*/"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"_createStaticVNode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"<p class="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"\\\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"vue"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"\\\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":">Vue.js is Cool</p><p class="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"\\\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"\\\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":">Solid.js is also Cool</p><p class="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"\\\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"vue"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"\\\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":">Vue.js is Cool</p><p class="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"\\\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"\\\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":">Solid.js is also Cool</p><p class="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"\\\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"solid"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"\\\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":">React is cool</p>\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#F97583"},"children":[{"type":"text","value":" function"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" render"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"_ctx"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"_cache"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"$props"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"$setup"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"$data"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#FFAB70"},"children":[{"type":"text","value":"$options"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0;--shiki-dark:#F97583"},"children":[{"type":"text","value":"  return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"_openBlock"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"(), "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"_createElementBlock"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"div\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", [\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"    _hoisted_1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"    _createElementVNode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178;--shiki-dark:#9ECBFF"},"children":[{"type":"text","value":"\"p\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"_toDisplayString"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"_ctx"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"agree"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"), "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955;--shiki-dark:#6A737D"},"children":[{"type":"text","value":" /* TEXT */"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"  ]))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The variable "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"_hoisted_1"}]},{"type":"text","value":" is a group of all static "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"p"}]},{"type":"text","value":" tags, there is a separate VNode for the last "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"p"}]},{"type":"text","value":" tag as it uses state "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"agree"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"_2-patch-flags"},"children":[{"type":"text","value":"2. Patch Flags"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To describe it in a way that would probably cause Evan You a great deal of pain, a patch flag is a piece of meta-data added to the VNode to tell vue exactly what part of that node depends on state and they take the values:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"1 for text"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"2 for class"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"4 for style"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"8 for props"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can find the full list on "},{"type":"element","tag":"a","props":{"href":"https://github.com/vuejs/core/blob/main/packages/shared/src/patchFlags.ts","rel":["nofollow"]},"children":[{"type":"text","value":"Github patchFlags.ts"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Vue then uses this information to further optimize updates, allowing for even more fine-grained control."}]},{"type":"element","tag":"h3","props":{"id":"vapor-mode"},"children":[{"type":"text","value":"Vapor Mode"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Vapor mode is a feature now under development by the vue core team, and it is a game changer. It aims at getting rid of the VDOM approach as a whole."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is inspired by the solid.js approach (also Qwik) as it doesn't use a VDOM; instead, it maps changes directly to DOM nodes."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"From a memory prespective you now remove a very large object (the VDOM) from memory gaining significant performance inhancements and you also target specific DOM nodes with your updates instead of updating a full component without the need for static hoisting, it just works."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"NOTE:"}]},{"type":"text","value":" worth mentioning that this feature is opt-in and can be incrementally adopted, so no worries."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nI know y'all are still traumatized by the Vue 2 -> 3 update."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is a huge topic to talk about, so perhaps I'll write an article about it in the future. Until then, you can experiment with vapor mode in the "},{"type":"element","tag":"a","props":{"href":"https://vapor-repl.netlify.app/","rel":["nofollow"]},"children":[{"type":"text","value":"Vapor Mode playground"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"conclusion"},"children":[{"type":"text","value":"Conclusion"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We can summarize everything into the following points:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Vue uses refs (signals) to know exactly which components to render."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"When a ref is passed as a prop, the component subscribes to it even if it doesn't read it."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"You can use Provide / Inject to avoid this behavior and prop drilling."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"You can define explicitly which refs to watch by using the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"v-memo"}]},{"type":"text","value":" directive or opt-out completely by using "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"v-once"}]},{"type":"text","value":" directive."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The compiler does some work to hoist static content and inform runtime of which parts can be changed."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Vapor mode is going to allow for more fine-grained reactivity by updating DOM directly instead of VDOM."}]}]},{"type":"element","tag":"h2","props":{"id":"references"},"children":[{"type":"text","value":"References"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you want to learn more about how reactivity works in most modern frameworks, check out \""},{"type":"element","tag":"a","props":{"href":"https://www.builder.io/blog/reactivity-across-frameworks","rel":["nofollow"]},"children":[{"type":"text","value":"Unveiling the Magic: Exploring Reactivity Across Various Frameworks"}]},{"type":"text","value":"\" by MIKO HEVERY"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you want to know how vue refs work and how they relate to signals, check out "},{"type":"element","tag":"a","props":{"href":"https://vuejs.org/guide/extras/reactivity-in-depth.html#connection-to-signals","rel":["nofollow"]},"children":[{"type":"text","value":"Connection to Signals"}]},{"type":"text","value":" on the official vue docs."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you want to read more about Vapor Mode read "},{"type":"element","tag":"a","props":{"href":"https://www.vuemastery.com/blog/the-future-of-vue-vapor-mode/","rel":["nofollow"]},"children":[{"type":"text","value":"The Future of Vue: Vapor Mode"}]},{"type":"text","value":" by Timi Omoyeni."}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"how-reactivity-works-in-vuereact","depth":2,"text":"How Reactivity Works in Vue/React"},{"id":"refs-signals-before-they-were-cool","depth":2,"text":"Refs (signals before they were cool)"},{"id":"provide-inject","depth":2,"text":"Provide / Inject"},{"id":"reduce-dependencies-with-v-once-and-v-memo","depth":2,"text":"Reduce Dependencies With v-once And v-memo"},{"id":"v-dom-vs-dom-node-updates","depth":2,"text":"V-DOM vs DOM node updates","children":[{"id":"_1-static-hoisting","depth":3,"text":"1. Static Hoisting"},{"id":"_2-patch-flags","depth":3,"text":"2. Patch Flags"},{"id":"vapor-mode","depth":3,"text":"Vapor Mode"}]},{"id":"conclusion","depth":2,"text":"Conclusion"},{"id":"references","depth":2,"text":"References"}]}},"_type":"markdown","_id":"content:blog:4.handle-unwanted-rerendering.md","_source":"content","_file":"blog/4.handle-unwanted-rerendering.md","_extension":"md"}],"navigation":[{"title":"Blog","_path":"/blog","children":[{"title":"Client Side Inference with TFJS","_path":"/blog/client-side-inference","date":"2021-02-24"},{"title":"Data Generators In Tensorflow","_path":"/blog/datagenerator","date":"2020-05-25"},{"title":"A Comprehensive Guide For scikit-learn Pipelines","_path":"/blog/scikit-learn-pipelines","date":"2021-01-26"},{"title":"Handle Unwanted Re-Rendering In Vue","_path":"/blog/handle-unwanted-rerendering","date":"2024-06-14"}]}]}